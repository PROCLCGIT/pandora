import{s as C,p as w,q as y,r as F,j as e}from"./index-CuM1UVNz.js";import{u as S,F as E,a as m,b as u,c as x,d as j,f as h,S as L}from"./form-v5aSno6F.js";import{s as U,o as z,a as b}from"./index-B73EABl6.js";import{u as I,a as T,R as k}from"./unidadService-Bs8V2DCy.js";import{B as t}from"./button-DvvEsyKI.js";import{I as p}from"./input-ZDudQbKj.js";import{C as A,a as B,b as G,d as M,c as R,e as V}from"./card-D4d4qW_8.js";import{L as D}from"./loader-circle-DQ38qZcg.js";import{A as f}from"./arrow-left-EuUX28YT.js";import"./axios-CTonWHPK.js";const H=z({nombre:b().min(2,{message:"El nombre debe tener al menos 2 caracteres"}).max(50),code:b().min(1,{message:"El c贸digo debe tener al menos 1 caracter"}).max(50)});function Z(){const{id:o}=C(),i=w(),{toast:d}=y(),[l,n]=F.useState(!1),{data:a,isLoading:N,error:c}=I(o),g=T({onSuccess:s=>{n(!1),d({title:"Unidad actualizada",description:`La unidad "${s.nombre}" se ha actualizado correctamente.`,variant:"success"})},onError:s=>{n(!1),d({title:"Error al actualizar",description:s.message||"Ha ocurrido un error al actualizar la unidad.",variant:"destructive"})}}),r=S({resolver:U(H),defaultValues:{nombre:(a==null?void 0:a.nombre)||"",code:(a==null?void 0:a.code)||""},values:a}),v=s=>{n(!0),g.mutate({id:o,data:s})};return N?e.jsxs("div",{className:"flex justify-center items-center h-[500px]",children:[e.jsx(D,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2",children:"Cargando informaci贸n de la unidad..."})]}):c?e.jsxs("div",{className:"container mx-auto py-6 max-w-3xl",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-md text-red-600 mb-4",children:["Error al cargar los datos de la unidad: ",c.message]}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>i("/basic/unidades"),className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4"})," Volver a la lista"]})]}):e.jsxs("div",{className:"container mx-auto py-6 max-w-3xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Editar Unidad de Medida"})]}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>i("/basic/unidades"),className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4"})," Volver"]})]}),e.jsxs(A,{className:"border-blue-100 shadow-md",children:[e.jsxs(B,{children:[e.jsx(G,{children:a==null?void 0:a.nombre}),e.jsx(M,{children:"Actualice la informaci贸n de la unidad de medida. Los campos marcados con * son obligatorios."})]}),e.jsx(E,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(v),children:[e.jsxs(R,{className:"space-y-4",children:[e.jsx(m,{control:r.control,name:"code",render:({field:s})=>e.jsxs(u,{children:[e.jsx(x,{children:"C贸digo *"}),e.jsx(j,{children:e.jsx(p,{placeholder:"Ej: KG, LT, UND",...s})}),e.jsx(h,{})]})}),e.jsx(m,{control:r.control,name:"nombre",render:({field:s})=>e.jsxs(u,{children:[e.jsx(x,{children:"Nombre *"}),e.jsx(j,{children:e.jsx(p,{placeholder:"Nombre de la unidad de medida",...s})}),e.jsx(h,{})]})})]}),e.jsxs(V,{className:"flex justify-between",children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>i("/basic/unidades"),children:"Cancelar"}),e.jsxs(t,{type:"submit",disabled:l,className:"gap-1",children:[e.jsx(L,{className:"h-4 w-4"}),l?"Guardando...":"Guardar Cambios"]})]})]})})]})]})}export{Z as default};
