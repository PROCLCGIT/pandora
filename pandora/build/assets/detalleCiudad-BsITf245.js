import{s as v,p as N,q as b,r as C,j as e}from"./index-CuM1UVNz.js";import{b as D,a as E}from"./ciudadService-DirJXudY.js";import{B as a}from"./button-DvvEsyKI.js";import{C as o,a as m,b as x,d as u,c as h}from"./card-D4d4qW_8.js";import{D as w,a as S,b as y,c as k,d as L,e as P}from"./dialog-DY3vMJng.js";import{A as T}from"./arrow-left-EuUX28YT.js";import{S as _}from"./square-pen-cdigAb40.js";import{T as q}from"./trash-2-BwIRBH_r.js";import"./axios-CTonWHPK.js";import"./useInfiniteQuery-Ci5GnK52.js";import"./Combination-CQ9AiL49.js";function G(){const{id:r}=v(),d=N(),{toast:t}=b(),[j,i]=C.useState(!1),{data:s,isLoading:p,isError:g,error:n}=D(r,{onError:c=>{t({title:"Error al cargar detalles",description:`No se pudieron cargar los detalles de la ciudad: ${c.message}`,variant:"destructive"})}}),l=E({onSuccess:()=>{t({title:"Ciudad eliminada",description:"La ciudad ha sido eliminada correctamente."}),d("/basic/ciudades")},onError:c=>{t({title:"Error al eliminar",description:`No se pudo eliminar la ciudad: ${c.message}`,variant:"destructive"})}}),f=()=>{l.mutate(r,{onSettled:()=>{i(!1)}})};return e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs(a,{variant:"ghost",onClick:()=>d("/basic/ciudades"),className:"mb-4",children:[e.jsx(T,{className:"mr-2 h-4 w-4"})," Volver a ciudades"]}),p?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):g?e.jsxs(o,{className:"border-destructive",children:[e.jsxs(m,{children:[e.jsx(x,{children:"Error al cargar datos"}),e.jsx(u,{children:"No se pudieron cargar los detalles de la ciudad"})]}),e.jsx(h,{children:e.jsx("p",{children:(n==null?void 0:n.message)||"Error desconocido"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[s.nombre,", ",s.provincia]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(a,{variant:"outline",onClick:()=>d(`/basic/ciudades/edit/${r}`),children:[e.jsx(_,{className:"mr-2 h-4 w-4"})," Editar"]}),e.jsxs(a,{variant:"destructive",onClick:()=>i(!0),children:[e.jsx(q,{className:"mr-2 h-4 w-4"})," Eliminar"]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Detalles de la Ciudad"}),e.jsx(u,{children:"Información completa de la ciudad"})]}),e.jsxs(h,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Nombre"}),e.jsx("p",{className:"text-lg",children:s.nombre})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Provincia"}),e.jsx("p",{className:"text-lg",children:s.provincia})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Código"}),e.jsx("p",{className:"text-lg font-mono bg-muted p-2 rounded",children:s.code})]}),e.jsxs("div",{className:"border-t pt-4 mt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Metadatos"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ID: "}),e.jsx("span",{className:"font-mono",children:s.id})]}),s.created_at&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Creado: "}),e.jsx("span",{children:new Date(s.created_at).toLocaleString()})]}),s.updated_at&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Actualizado: "}),e.jsx("span",{children:new Date(s.updated_at).toLocaleString()})]})]})]})]})]}),e.jsx(w,{open:j,onOpenChange:i,children:e.jsxs(S,{children:[e.jsxs(y,{children:[e.jsx(k,{children:"Confirmar eliminación"}),e.jsxs(L,{children:['¿Estás seguro de que deseas eliminar la ciudad "',s.nombre,", ",s.provincia,'"? Esta acción no se puede deshacer.']})]}),e.jsxs(P,{children:[e.jsx(a,{variant:"outline",onClick:()=>i(!1),children:"Cancelar"}),e.jsx(a,{variant:"destructive",onClick:f,disabled:l.isPending,children:l.isPending?"Eliminando...":"Eliminar"})]})]})})]})]})}export{G as default};
