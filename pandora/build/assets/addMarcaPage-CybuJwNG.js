import{s as F,p as L,q as M,r as S,j as e}from"./index-CuM1UVNz.js";import{u as y,F as P,a as s,b as c,c as i,d as n,e as t,f as d}from"./form-v5aSno6F.js";import{o as k,c as z,a as D,d as l}from"./index.esm-mctYN2X9.js";import{b as I,c as A,d as U}from"./marcaService-DsNCAPSw.js";import{I as p}from"./input-ZDudQbKj.js";import{T as f}from"./textarea-DSyUkBxL.js";import{C as $}from"./checkbox-CnhrIF9M.js";import{F as q}from"./FormCard-dpmmvjug.js";import{A as B}from"./award-Bv_wBtov.js";import"./axios-CTonWHPK.js";import"./useInfiniteQuery-Ci5GnK52.js";import"./index-BGi3wog7.js";import"./index-CkfEdLBp.js";import"./button-DvvEsyKI.js";import"./card-D4d4qW_8.js";import"./arrow-left-EuUX28YT.js";const R=z({nombre:l().required("El nombre es obligatorio").max(50,"El nombre no debe exceder los 50 caracteres"),code:l().required("El código es obligatorio").max(20,"El código no debe exceder los 20 caracteres"),description:l().max(500,"La descripción no debe exceder los 500 caracteres"),proveedores:l().max(100,"Los proveedores no deben exceder los 100 caracteres"),country_origin:l().max(50,"El país de origen no debe exceder los 50 caracteres"),website:l().url("Debe ser una URL válida").max(200,"El sitio web no debe exceder los 200 caracteres"),contact_info:l().max(500,"La información de contacto no debe exceder los 500 caracteres"),is_active:D().default(!0)});function ce(){const{id:u}=F(),j=L(),{toast:m}=M(),x=!!u,o=y({resolver:k(R),defaultValues:{nombre:"",code:"",description:"",proveedores:"",country_origin:"",website:"",contact_info:"",is_active:!0}}),{data:a,isLoading:T}=I(u);S.useEffect(()=>{x&&a&&o.reset({nombre:a.nombre,code:a.code,description:a.description||"",proveedores:a.proveedores||"",country_origin:a.country_origin||"",website:a.website||"",contact_info:a.contact_info||"",is_active:a.is_active})},[a,o,x]);const h=A(),b=U(),v=()=>{m({title:"Marca creada",description:"La marca ha sido creada exitosamente."}),j("/basic/marcas")},E=r=>{m({title:"Error al crear",description:`No se pudo crear la marca: ${r.message||"Error desconocido"}`,variant:"destructive"})},C=()=>{m({title:"Marca actualizada",description:"La marca ha sido actualizada exitosamente."}),j("/basic/marcas")},N=r=>{m({title:"Error al actualizar",description:`No se pudo actualizar la marca: ${r.message||"Error desconocido"}`,variant:"destructive"})},g=r=>{try{x?b.mutate({id:u,data:r},{onSuccess:C,onError:N}):h.mutate(r,{onSuccess:v,onError:E})}catch(w){console.error("Error en formulario:",w),m({title:"Error en el formulario",description:"Hubo un error al procesar el formulario. Por favor, revisa los datos ingresados.",variant:"destructive"})}},_=h.isPending||b.isPending;return e.jsx(q,{title:x?"Editar Marca":"Nueva Marca",description:x?"Actualiza la información de la marca existente":"Completa el formulario para crear una nueva marca",onSubmit:o.handleSubmit(g),onCancel:()=>j("/basic/marcas"),backLink:"Volver a marcas",isSubmitting:_,icon:e.jsx(B,{size:24,strokeWidth:1.5}),children:e.jsx(P,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(g),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(s,{control:o.control,name:"nombre",render:({field:r})=>e.jsxs(c,{children:[e.jsx(i,{children:"Nombre"}),e.jsx(n,{children:e.jsx(p,{placeholder:"Nombre de la marca",...r})}),e.jsx(t,{children:"Nombre de la marca (obligatorio)"}),e.jsx(d,{})]})}),e.jsx(s,{control:o.control,name:"code",render:({field:r})=>e.jsxs(c,{children:[e.jsx(i,{children:"Código"}),e.jsx(n,{children:e.jsx(p,{placeholder:"Código único",...r})}),e.jsx(t,{children:"Código único para identificar la marca (obligatorio)"}),e.jsx(d,{})]})})]}),e.jsx(s,{control:o.control,name:"description",render:({field:r})=>e.jsxs(c,{children:[e.jsx(i,{children:"Descripción"}),e.jsx(n,{children:e.jsx(f,{placeholder:"Descripción de la marca...",className:"min-h-[120px]",...r})}),e.jsx(t,{children:"Breve descripción de la marca y sus productos"}),e.jsx(d,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(s,{control:o.control,name:"proveedores",render:({field:r})=>e.jsxs(c,{children:[e.jsx(i,{children:"Proveedores"}),e.jsx(n,{children:e.jsx(p,{placeholder:"Proveedores principales",...r})}),e.jsx(t,{children:"Nombres de proveedores principales para esta marca"}),e.jsx(d,{})]})}),e.jsx(s,{control:o.control,name:"country_origin",render:({field:r})=>e.jsxs(c,{children:[e.jsx(i,{children:"País de origen"}),e.jsx(n,{children:e.jsx(p,{placeholder:"País de origen",...r})}),e.jsx(t,{children:"País de origen de la marca"}),e.jsx(d,{})]})})]}),e.jsx(s,{control:o.control,name:"website",render:({field:r})=>e.jsxs(c,{children:[e.jsx(i,{children:"Sitio web"}),e.jsx(n,{children:e.jsx(p,{placeholder:"https://www.ejemplo.com",...r})}),e.jsx(t,{children:"URL del sitio web oficial de la marca"}),e.jsx(d,{})]})}),e.jsx(s,{control:o.control,name:"contact_info",render:({field:r})=>e.jsxs(c,{children:[e.jsx(i,{children:"Información de contacto"}),e.jsx(n,{children:e.jsx(f,{placeholder:"Información de contacto...",className:"min-h-[80px]",...r})}),e.jsx(t,{children:"Datos de contacto como correo, teléfono, dirección, etc."}),e.jsx(d,{})]})}),e.jsx(s,{control:o.control,name:"is_active",render:({field:r})=>e.jsxs(c,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 border-blue-100",children:[e.jsx(n,{children:e.jsx($,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(i,{children:"Activo"}),e.jsx(t,{children:"Las marcas inactivas no se mostrarán en listados públicos"})]})]})})]})})})}export{ce as default};
