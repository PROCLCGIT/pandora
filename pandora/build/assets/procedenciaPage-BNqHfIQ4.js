import{s as C,p as w,q as y,r as F,j as e}from"./index-CuM1UVNz.js";import{u as S,F as E,a as m,b as x,c as u,d as j,f as p,S as P}from"./form-v5aSno6F.js";import{s as L,o as z,a as b}from"./index-B73EABl6.js";import{u as I,a as G}from"./procedenciaService-DWQpBnYH.js";import{B as o}from"./button-DvvEsyKI.js";import{I as h}from"./input-ZDudQbKj.js";import{C as T,a as k,b as A,d as B,c as V,e as H}from"./card-D4d4qW_8.js";import{L as M}from"./loader-circle-DQ38qZcg.js";import{A as f}from"./arrow-left-EuUX28YT.js";import{G as R}from"./globe-FYGSDlcS.js";import"./axios-CTonWHPK.js";const q=z({nombre:b().min(3,{message:"El nombre debe tener al menos 3 caracteres"}).max(50),code:b().min(2,{message:"El c贸digo debe tener al menos 2 caracteres"}).max(50)});function _(){const{id:i}=C(),t=w(),{toast:n}=y(),[l,c]=F.useState(!1),{data:a,isLoading:g,error:d}=I(i),N=G({onSuccess:s=>{c(!1),n({title:"Procedencia actualizada",description:`La procedencia "${s.nombre}" se ha actualizado correctamente.`,variant:"success"})},onError:s=>{c(!1),n({title:"Error al actualizar",description:s.message||"Ha ocurrido un error al actualizar la procedencia.",variant:"destructive"})}}),r=S({resolver:L(q),defaultValues:{nombre:(a==null?void 0:a.nombre)||"",code:(a==null?void 0:a.code)||""},values:a}),v=s=>{c(!0),N.mutate({id:i,data:s})};return g?e.jsxs("div",{className:"flex justify-center items-center h-[500px]",children:[e.jsx(M,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2",children:"Cargando informaci贸n de la procedencia..."})]}):d?e.jsxs("div",{className:"container mx-auto py-6 max-w-3xl",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-md text-red-600 mb-4",children:["Error al cargar los datos de la procedencia: ",d.message]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>t("/basic/procedencias"),className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4"})," Volver a la lista"]})]}):e.jsxs("div",{className:"container mx-auto py-6 max-w-3xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Editar Procedencia"})]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>t("/basic/procedencias"),className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4"})," Volver"]})]}),e.jsxs(T,{className:"border-blue-100 shadow-md",children:[e.jsxs(k,{children:[e.jsx(A,{children:a==null?void 0:a.nombre}),e.jsx(B,{children:"Actualice la informaci贸n de la procedencia. Los campos marcados con * son obligatorios."})]}),e.jsx(E,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(v),children:[e.jsxs(V,{className:"space-y-4",children:[e.jsx(m,{control:r.control,name:"code",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"C贸digo *"}),e.jsx(j,{children:e.jsx(h,{placeholder:"Ej: PROC-01",...s})}),e.jsx(p,{})]})}),e.jsx(m,{control:r.control,name:"nombre",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Nombre *"}),e.jsx(j,{children:e.jsx(h,{placeholder:"Nombre de la procedencia",...s})}),e.jsx(p,{})]})})]}),e.jsxs(H,{className:"flex justify-between",children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>t("/basic/procedencias"),children:"Cancelar"}),e.jsxs(o,{type:"submit",disabled:l,className:"gap-1",children:[e.jsx(P,{className:"h-4 w-4"}),l?"Guardando...":"Guardar Cambios"]})]})]})})]})]})}export{_ as default};
