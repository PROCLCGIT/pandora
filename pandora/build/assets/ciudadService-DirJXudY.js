import{u as d,a as o,b as n}from"./axios-CTonWHPK.js";import{v as c}from"./index-CuM1UVNz.js";import{u as f}from"./useInfiniteQuery-Ci5GnK52.js";const s="/basic/ciudades/",a="ciudades",y=async(e={})=>{try{const r=await n.get(s,{params:e});return Array.isArray(r.data)?{count:r.data.length,results:r.data}:r.data&&r.data.results?r.data:{count:1,results:Array.isArray(r.data)?r.data:[r.data].filter(Boolean)}}catch(r){throw console.error("Error fetching ciudades:",r),r}},h=async e=>{try{return(await n.get(`${s}${e}/`)).data}catch(r){throw console.error(`Error fetching ciudad id ${e}:`,r),r}},E=async e=>{try{return(await n.post(s,e)).data}catch(r){throw console.error("Error creating ciudad:",r),r}},C=async({id:e,data:r})=>{try{return(await n.put(`${s}${e}/`,r)).data}catch(t){throw console.error(`Error updating ciudad id ${e}:`,t),t}},g=async e=>{try{return await n.delete(`${s}${e}/`),e}catch(r){throw console.error(`Error deleting ciudad id ${e}:`,r),r}},S=(e={},r={})=>d({queryKey:[a,e],queryFn:()=>y(e),staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1,...r}),p=(e,r={})=>d({queryKey:[a,e],queryFn:()=>h(e),enabled:!!e,staleTime:5*60*1e3,retry:1,retryDelay:1e3,refetchOnWindowFocus:!1,placeholderData:{id:null,nombre:"",provincia:"",code:""},...r}),F=(e={})=>{const r=c();return o({mutationFn:E,onSuccess:t=>{r.invalidateQueries({queryKey:[a]}),e.onSuccess&&e.onSuccess(t)},onError:t=>{e.onError&&e.onError(t)},...e})},K=(e={})=>{const r=c();return o({mutationFn:C,onSuccess:t=>{r.invalidateQueries({queryKey:[a,t.id]}),r.invalidateQueries({queryKey:[a]}),e.onSuccess&&e.onSuccess(t)},onError:t=>{e.onError&&e.onError(t)},...e})},Q=(e={})=>{const r=c();return o({mutationFn:g,onSuccess:t=>{r.invalidateQueries({queryKey:[a,t]}),r.invalidateQueries({queryKey:[a]}),e.onSuccess&&e.onSuccess(t)},onError:t=>{e.onError&&e.onError(t)},...e})},$=(e={},r={})=>{const t=e.page_size||10;return f({queryKey:[a,"infinite",e],queryFn:({pageParam:u=1})=>y({...e,page:u,page_size:t}),getNextPageParam:(u,i)=>{const l=Math.ceil(u.count/t);return i.length<l?i.length+1:void 0},staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1,...r})};export{Q as a,p as b,F as c,K as d,$ as e,S as u};
