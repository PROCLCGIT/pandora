import{j as e,r as S,X as z,p as V,q as $}from"./index-CuM1UVNz.js";import{h as F,c as l,a as v,b as x,d as u,f as h,e as N,u as T,F as I,S as L}from"./form-v5aSno6F.js";import{o as B,c as f,e as y,d as m}from"./index.esm-mctYN2X9.js";import{B as n}from"./button-DvvEsyKI.js";import{I as j}from"./input-ZDudQbKj.js";import{C,a as E,b as q,d as P,c as w,e as H}from"./card-D4d4qW_8.js";import{P as D}from"./plus-6cwyY5hA.js";import{T as K}from"./trash-2-BwIRBH_r.js";import{B as R}from"./badge-D5I9DsW8.js";import{A as G}from"./arrow-left-EuUX28YT.js";function J({form:a,name:o,label:s="Atributos"}){const{fields:t,append:r,remove:p}=F({control:a.control,name:o});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(l,{className:"text-base",children:s}),e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:()=>r({nombre:"",valor:""}),children:[e.jsx(D,{className:"mr-2 h-4 w-4"})," Añadir atributo"]})]}),t.length===0?e.jsx("div",{className:"text-sm text-muted-foreground py-4 text-center border rounded-md",children:'No hay atributos definidos. Haz clic en "Añadir atributo" para comenzar.'}):e.jsx("div",{className:"space-y-3",children:t.map((b,c)=>e.jsxs("div",{className:"flex items-start space-x-2 border p-3 rounded-md",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 flex-1",children:[e.jsx(v,{control:a.control,name:`${o}.${c}.nombre`,render:({field:d})=>e.jsxs(x,{children:[e.jsx(l,{className:"text-xs",children:"Nombre"}),e.jsx(u,{children:e.jsx(j,{placeholder:"Nombre del atributo",...d})}),e.jsx(h,{})]})}),e.jsx(v,{control:a.control,name:`${o}.${c}.valor`,render:({field:d})=>e.jsxs(x,{children:[e.jsx(l,{className:"text-xs",children:"Valor"}),e.jsx(u,{children:e.jsx(j,{placeholder:"Valor del atributo",...d})}),e.jsx(h,{})]})})]}),e.jsx(n,{type:"button",variant:"ghost",size:"icon",className:"mt-6",onClick:()=>p(c),title:"Eliminar atributo",children:e.jsx(K,{className:"h-4 w-4"})})]},b.id))})]})}function M({form:a,name:o,label:s="Etiquetas",description:t="Presiona Enter o haz clic en + para añadir una etiqueta"}){const[r,p]=S.useState(""),{fields:b,append:c,remove:d}=F({control:a.control,name:o}),g=()=>{r.trim()!==""&&(c({nombre:r.trim()}),p(""))},A=i=>{i.key==="Enter"&&(i.preventDefault(),g())};return e.jsxs(x,{children:[e.jsx(l,{children:s}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(u,{children:e.jsx(j,{placeholder:"Nueva etiqueta...",value:r,onChange:i=>p(i.target.value),onKeyDown:A})}),e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:g,title:"Añadir etiqueta",children:e.jsx(D,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.length===0?e.jsx("div",{className:"text-sm text-muted-foreground w-full",children:"No hay etiquetas añadidas"}):b.map((i,k)=>e.jsxs(R,{className:"px-3 py-2 flex items-center space-x-1 hover:bg-primary/90",children:[e.jsx("span",{children:i.nombre}),e.jsx(n,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>d(k),children:e.jsx(z,{className:"h-3 w-3"})})]},i.id))})]}),e.jsx(N,{children:t}),e.jsx(h,{})]})}const O=f({nombre:m().required("El nombre es obligatorio").max(255,"El nombre no debe exceder los 255 caracteres"),descripcion:m().max(500,"La descripción no debe exceder los 500 caracteres"),atributos:y().of(f({nombre:m().required("El nombre del atributo es obligatorio").max(100,"El nombre no debe exceder los 100 caracteres"),valor:m().required("El valor del atributo es obligatorio").max(255,"El valor no debe exceder los 255 caracteres")})),etiquetas:y().of(f({nombre:m().required("El nombre de la etiqueta es obligatorio").max(50,"La etiqueta no debe exceder los 50 caracteres")}))});function ae(){const a=V(),{toast:o}=$(),s=T({resolver:B(O),defaultValues:{nombre:"",descripcion:"",atributos:[],etiquetas:[]}}),t=r=>{console.log("Datos enviados:",r),o({title:"Formulario enviado",description:"Los datos se han enviado correctamente."})};return e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs(n,{variant:"ghost",onClick:()=>a(-1),className:"mb-4",children:[e.jsx(G,{className:"mr-2 h-4 w-4"})," Volver"]}),e.jsxs(C,{children:[e.jsxs(E,{children:[e.jsx(q,{children:"Ejemplo de Campos Dinámicos"}),e.jsx(P,{children:"Demuestra cómo trabajar con arrays de campos usando React Hook Form"})]}),e.jsx(w,{children:e.jsx(I,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(t),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(v,{control:s.control,name:"nombre",render:({field:r})=>e.jsxs(x,{children:[e.jsx(l,{children:"Nombre"}),e.jsx(u,{children:e.jsx(j,{placeholder:"Nombre del elemento",...r})}),e.jsx(N,{children:"Nombre descriptivo para el elemento"}),e.jsx(h,{})]})}),e.jsx(v,{control:s.control,name:"descripcion",render:({field:r})=>e.jsxs(x,{children:[e.jsx(l,{children:"Descripción"}),e.jsx(u,{children:e.jsx(j,{placeholder:"Descripción del elemento",...r})}),e.jsx(N,{children:"Descripción detallada (opcional)"}),e.jsx(h,{})]})})]}),e.jsx("div",{className:"border p-4 rounded-md",children:e.jsx(J,{form:s,name:"atributos",label:"Atributos del Elemento"})}),e.jsx("div",{className:"border p-4 rounded-md",children:e.jsx(M,{form:s,name:"etiquetas",label:"Etiquetas",description:"Escribe una etiqueta y presiona Enter o el botón + para añadirla"})})]})})}),e.jsxs(H,{className:"flex justify-between",children:[e.jsx(n,{variant:"outline",onClick:()=>a(-1),children:"Cancelar"}),e.jsxs(n,{onClick:s.handleSubmit(t),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Guardar"]})]})]}),e.jsxs(C,{className:"mt-6",children:[e.jsx(E,{children:e.jsx(q,{children:"Vista previa de datos"})}),e.jsx(w,{children:e.jsx("pre",{className:"bg-muted p-4 rounded-md overflow-auto max-h-96",children:JSON.stringify(s.watch(),null,2)})})]})]})}export{ae as default};
