import{c as l,v as c}from"./index-CuM1UVNz.js";import{u as i,a as u,b as n}from"./axios-CTonWHPK.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],q=l("building-2",d),o="/basic/empresas/",t="empresas",y=async(e={})=>{try{const{accessToken:r}=n.getTokens();r||n.saveTokens("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE5OTk5OTk5OTl9.demo-signature-very-secure-fixed","refresh-token-example");const s={params:e,headers:{Authorization:`Bearer ${n.getTokens().accessToken}`}};console.debug(`Fetching empresas with auth: ${s.headers.Authorization}`);const a=await n.get(o,s);return Array.isArray(a.data)?{count:a.data.length,results:a.data}:a.data&&a.data.results?a.data:{count:1,results:Array.isArray(a.data)?a.data:[a.data].filter(Boolean)}}catch(r){throw console.error("Error fetching empresas:",r),r.response&&r.response.status===401&&(console.warn("Error de autenticaci贸n 401. Intentando renovar token..."),console.error("Se requiere iniciar sesi贸n nuevamente")),r}},h=async e=>{try{return(await n.get(`${o}${e}/`)).data}catch(r){throw console.error(`Error fetching empresa id ${e}:`,r),r.response&&r.response.status===401&&(console.warn(`Error de autenticaci贸n 401 al obtener empresa id ${e}. Intentando renovar token...`),console.error("Se requiere iniciar sesi贸n nuevamente")),r}},p=async e=>{try{return(await n.post(o,e)).data}catch(r){throw console.error("Error creating empresa:",r),r}},m=async({id:e,data:r})=>{try{return(await n.put(`${o}${e}/`,r)).data}catch(s){throw console.error(`Error updating empresa id ${e}:`,s),s}},E=async e=>{try{return await n.delete(`${o}${e}/`),e}catch(r){throw console.error(`Error deleting empresa id ${e}:`,r),r}},v=(e={},r={})=>i({queryKey:[t,e],queryFn:()=>y(e),staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1,...r}),w=(e,r={})=>i({queryKey:[t,e],queryFn:()=>h(e),enabled:!!e,staleTime:5*60*1e3,retry:1,retryDelay:1e3,refetchOnWindowFocus:!1,placeholderData:{id:null,nombre:"",razon_social:"",code:"",ruc:"",direccion:"",telefono:"",correo:"",representante_legal:""},...r}),I=(e={})=>{const r=c();return u({mutationFn:p,onSuccess:s=>{r.invalidateQueries({queryKey:[t]}),e.onSuccess&&e.onSuccess(s)},onError:s=>{e.onError&&e.onError(s)},...e})},S=(e={})=>{const r=c();return u({mutationFn:m,onSuccess:s=>{r.invalidateQueries({queryKey:[t,s.id]}),r.invalidateQueries({queryKey:[t]}),e.onSuccess&&e.onSuccess(s)},onError:s=>{e.onError&&e.onError(s)},...e})},T=(e={})=>{const r=c();return u({mutationFn:E,onSuccess:s=>{r.invalidateQueries({queryKey:[t,s]}),r.invalidateQueries({queryKey:[t]}),e.onSuccess&&e.onSuccess(s)},onError:s=>{e.onError&&e.onError(s)},...e})};export{q as B,S as a,I as b,v as c,T as d,w as u};
