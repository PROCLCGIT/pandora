import{s as C,p as E,q as S,r as w,j as e}from"./index-CuM1UVNz.js";import{u as y,F,a as m,b as x,c as u,d as p,f as j,S as L}from"./form-v5aSno6F.js";import{s as z,o as I,a as h}from"./index-B73EABl6.js";import{u as T,a as k,S as A}from"./especialidadService-BF-SVRhy.js";import{B as i}from"./button-DvvEsyKI.js";import{I as b}from"./input-ZDudQbKj.js";import{C as B,a as P,b as V,d as G,c as H,e as M}from"./card-D4d4qW_8.js";import{L as q}from"./loader-circle-DQ38qZcg.js";import{A as f}from"./arrow-left-EuUX28YT.js";import"./axios-CTonWHPK.js";const D=I({nombre:h().min(3,{message:"El nombre debe tener al menos 3 caracteres"}).max(50),code:h().min(2,{message:"El c贸digo debe tener al menos 2 caracteres"}).max(50)});function Z(){const{id:l}=C(),t=E(),{toast:c}=S(),[n,o]=w.useState(!1),{data:a,isLoading:g,error:d}=T(l),N=k({onSuccess:s=>{o(!1),c({title:"Especialidad actualizada",description:`La especialidad "${s.nombre}" se ha actualizado correctamente.`})},onError:s=>{o(!1),c({title:"Error al actualizar",description:s.message||"Ha ocurrido un error al actualizar la especialidad.",variant:"destructive"})}}),r=y({resolver:z(D),defaultValues:{nombre:(a==null?void 0:a.nombre)||"",code:(a==null?void 0:a.code)||""},values:a}),v=s=>{o(!0),N.mutate({id:l,data:s})};return g?e.jsxs("div",{className:"flex justify-center items-center h-[500px]",children:[e.jsx(q,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2",children:"Cargando informaci贸n de la especialidad..."})]}):d?e.jsxs("div",{className:"container mx-auto py-6 max-w-3xl",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-md text-red-600 mb-4",children:["Error al cargar los datos de la especialidad: ",d.message]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>t("/basic/especialidades"),className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4"})," Volver a la lista"]})]}):e.jsxs("div",{className:"container mx-auto py-6 max-w-3xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Editar Especialidad"})]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>t("/basic/especialidades"),className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4"})," Volver"]})]}),e.jsxs(B,{className:"border-blue-100 shadow-md",children:[e.jsxs(P,{children:[e.jsx(V,{children:a==null?void 0:a.nombre}),e.jsx(G,{children:"Actualice la informaci贸n de la especialidad. Los campos marcados con * son obligatorios."})]}),e.jsx(F,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(v),children:[e.jsxs(H,{className:"space-y-4",children:[e.jsx(m,{control:r.control,name:"code",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"C贸digo *"}),e.jsx(p,{children:e.jsx(b,{placeholder:"Ej: ESP-01",...s})}),e.jsx(j,{})]})}),e.jsx(m,{control:r.control,name:"nombre",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Nombre *"}),e.jsx(p,{children:e.jsx(b,{placeholder:"Nombre de la especialidad",...s})}),e.jsx(j,{})]})})]}),e.jsxs(M,{className:"flex justify-between",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>t("/basic/especialidades"),children:"Cancelar"}),e.jsxs(i,{type:"submit",disabled:n,className:"gap-1",children:[e.jsx(L,{className:"h-4 w-4"}),n?"Guardando...":"Guardar Cambios"]})]})]})})]})]})}export{Z as default};
