import{s as v,p as E,q as y,r as z,j as e}from"./index-CuM1UVNz.js";import{u as S,F as w,a as o,b as n,c as l,d as c,f as i,S as L}from"./form-v5aSno6F.js";import{s as F,o as T,a as t,l as _}from"./index-B73EABl6.js";import{u as I,a as R,B}from"./empresaClcService-WSwY_hpR.js";import{B as m}from"./button-DvvEsyKI.js";import{I as d}from"./input-ZDudQbKj.js";import{T as D}from"./textarea-DSyUkBxL.js";import{S as k}from"./separator-BW-o1NvN.js";import{C as A,a as U,b as V,d as G,c as H,e as M}from"./card-D4d4qW_8.js";import{L as P}from"./loader-circle-DQ38qZcg.js";import{A as g}from"./arrow-left-EuUX28YT.js";import"./axios-CTonWHPK.js";const $=T({nombre:t().min(3,{message:"El nombre debe tener al menos 3 caracteres"}).max(150),razon_social:t().min(3,{message:"La razón social debe tener al menos 3 caracteres"}).max(150),code:t().min(2,{message:"El código debe tener al menos 2 caracteres"}).max(50),ruc:t().regex(/^\d{13}$/,{message:"El RUC debe contener 13 dígitos numéricos"}),direccion:t().min(5,{message:"La dirección debe tener al menos 5 caracteres"}).max(255),telefono:t().max(20).optional().or(_("")),correo:t().email({message:"Debe ingresar un correo electrónico válido"}).max(100),representante_legal:t().min(3,{message:"El nombre del representante debe tener al menos 3 caracteres"}).max(150)});function ae(){const{id:h}=v(),x=E(),{toast:p}=y(),[u,j]=z.useState(!1),{data:s,isLoading:f,error:b}=I(h),N=R({onSuccess:r=>{j(!1),p({title:"Empresa actualizada",description:`La empresa "${r.nombre}" se ha actualizado correctamente.`})},onError:r=>{j(!1),p({title:"Error al actualizar",description:r.message||"Ha ocurrido un error al actualizar la empresa.",variant:"destructive"})}}),a=S({resolver:F($),defaultValues:{nombre:(s==null?void 0:s.nombre)||"",razon_social:(s==null?void 0:s.razon_social)||"",code:(s==null?void 0:s.code)||"",ruc:(s==null?void 0:s.ruc)||"",direccion:(s==null?void 0:s.direccion)||"",telefono:(s==null?void 0:s.telefono)||"",correo:(s==null?void 0:s.correo)||"",representante_legal:(s==null?void 0:s.representante_legal)||""},values:s}),C=r=>{j(!0),N.mutate({id:h,data:r})};return f?e.jsxs("div",{className:"flex justify-center items-center h-[500px]",children:[e.jsx(P,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2",children:"Cargando información de la empresa..."})]}):b?e.jsxs("div",{className:"container mx-auto py-6 max-w-3xl",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-md text-red-600 mb-4",children:["Error al cargar los datos de la empresa: ",b.message]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>x("/basic/empresas"),className:"flex items-center gap-1",children:[e.jsx(g,{className:"h-4 w-4"})," Volver a la lista"]})]}):e.jsxs("div",{className:"container mx-auto py-6 max-w-3xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Editar Empresa CLC"})]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>x("/basic/empresas"),className:"flex items-center gap-1",children:[e.jsx(g,{className:"h-4 w-4"})," Volver"]})]}),e.jsxs(A,{className:"border-blue-100 shadow-md",children:[e.jsxs(U,{children:[e.jsx(V,{children:s==null?void 0:s.nombre}),e.jsx(G,{children:"Actualice la información de la empresa. Los campos marcados con * son obligatorios."})]}),e.jsx(w,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(C),children:[e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{control:a.control,name:"code",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Código Interno *"}),e.jsx(c,{children:e.jsx(d,{placeholder:"Ej: CLC-01",...r})}),e.jsx(i,{})]})}),e.jsx(o,{control:a.control,name:"ruc",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"RUC *"}),e.jsx(c,{children:e.jsx(d,{placeholder:"1234567890123",...r})}),e.jsx(i,{})]})})]}),e.jsx(o,{control:a.control,name:"nombre",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Nombre Comercial *"}),e.jsx(c,{children:e.jsx(d,{placeholder:"Nombre comercial de la empresa",...r})}),e.jsx(i,{})]})}),e.jsx(o,{control:a.control,name:"razon_social",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Razón Social *"}),e.jsx(c,{children:e.jsx(d,{placeholder:"Razón social completa",...r})}),e.jsx(i,{})]})}),e.jsx(k,{className:"my-4"}),e.jsx(o,{control:a.control,name:"direccion",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Dirección *"}),e.jsx(c,{children:e.jsx(D,{placeholder:"Dirección completa de la empresa",...r,rows:2})}),e.jsx(i,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{control:a.control,name:"telefono",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Teléfono"}),e.jsx(c,{children:e.jsx(d,{placeholder:"Ej: +593 999999999",...r})}),e.jsx(i,{})]})}),e.jsx(o,{control:a.control,name:"correo",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Correo Electrónico *"}),e.jsx(c,{children:e.jsx(d,{type:"email",placeholder:"ejemplo@empresa.com",...r})}),e.jsx(i,{})]})})]}),e.jsx(o,{control:a.control,name:"representante_legal",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Representante Legal *"}),e.jsx(c,{children:e.jsx(d,{placeholder:"Nombre completo del representante legal",...r})}),e.jsx(i,{})]})})]}),e.jsxs(M,{className:"flex justify-between",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>x("/basic/empresas"),children:"Cancelar"}),e.jsxs(m,{type:"submit",disabled:u,className:"gap-1",children:[e.jsx(L,{className:"h-4 w-4"}),u?"Guardando...":"Guardar Cambios"]})]})]})})]})]})}export{ae as default};
